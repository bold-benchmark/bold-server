<html>
  <head>
    <meta charset="utf-8">
    <title>BOLD: A Benchmark for Linked Data and Hypermedia Agents</title>
    <style>
      * {
        font-family: sans;
      }

      body {
        max-width: 640px;
        margin: auto;
      }

      body textarea {
        max-width: 640px;
      }
    </style>
  </head>
  <body>
    <h1>BOLD: A Benchmark for Linked Data and Hypermedia Agents</h1>

    <p>
      Welcome to the BOLD (Buildings on Linked Data) simulation server.
    </p>

    <h2>Environment Resources</h2>

    <p>
      The environment in BOLD is a building (more specifically, <a href="Building_B3">Building 3</a> of IBM <a href="City_Dublin">Dublin</a>).
      The building consists of rooms.
      Rooms contain lighting systems or occupancy sensors.
    </p>
    <p>
      As example consider the Coffee Dock room:
    </p>
    <ul>
      <li><a href="Room_CoffeeDesk">Coffee Dock room</a></li>
      <li><a href="Occupancy_Sensor_42GFLCoffeeDock">occupancy sensor of the Coffee Dock room</a></li>
      <li><a href="Lighting_System_42GFLCoffeeDock">lighting system of the Coffee Dock room</a></li>
    </ul>
    <p>
      @@@difference between system and sensor?
    </p>
    <p>
      Lighting systems and occupancy systems have properties, which have values (states).
      The notion of properties comes from the <a href="https://www.w3.org/TR/vocab-ssn/">Semantic Sensor Network Ontology (SSN)</a>.
      Other notions specific to building automation systems are captured by the <a href="https://brickschema.org/">Brick</a> ontology.
    </p>
    <p>
      As example consider the following properties of systems of the Coffee Dock room:
    </p>
    <ul>
      <li><a href="property-Occupancy_Sensor_42GFLCoffeeDock#it">the property of the occupancy sensor in the Coffee Dock room</a></li>
      <li><a href="property-Lighting_System_42GFLCoffeeDock#it">the property of the lighting system in the Coffee Dock room</a></li>
    </ul>

    <p>
      User agents can read properties and write properties.
    </p>

    <!--
    <p>
      In a sense, the environment is an RDF dataset.
    </p>
    -->

    <h2>Simulation Resources</h2>

    <p>
      You have already selected which task to run based on the command-line call.
    </p>

    <h3>Starting the Simulation</h3>
    
    <p>
      To start the simulation, PUT the following payload to <a href="sim">sim</a>:
    </p>
	
    <div>
      <textarea id="start-payload" rows="12" cols="70">@prefix : &lt;http://ti.rw.fau.de/sim#&gt;  .
@prefix xsd: &lt;http://www.w3.org/2001/XMLSchema#&gt; .
@base &lt;http://127.0.1.1:8080/&gt; .

&lt;sim&gt; :initialTime "2020-05-21T08:00:00Z"^^xsd:dateTime ;
      # in ms (corresponds to simulated time, not real execution time)
      :timeslotDuration 60000 ;
      :iterations 1440 .</textarea>
      </br>
        <button id="start-button">Send</button>
    </div>

    <h3>Simulated Time</h3>
    <p>
      The resource <a href="sim">sim</a> exposes the current time of the simulation.
    </p>
    <p>
      Essentially, the state of <a href="sim">sim</a> is the result of the update done via
      <a href="https://github.com/bold-benchmark/bold-server/blob/master/src/main/resources/sim-init.rq">sim-init.rq</a> and
      <a href="https://github.com/bold-benchmark/bold-server/blob/master/src/main/resources/sim.rq">sim.rq</a>.
    </p>

    <h3>Simulated Illuminance and Occupancy</h3>

    <p>
      Illuminance (through sunlight) and occupancy measurements are simulated via SPARQL updates.
    </p>

    <p>
      The <a href="https://github.com/bold-benchmark/bold-server/blob/master/query/init-sim-illuminance.rq">init-sim-illuminance.rq</a> SPARQL update initialises illuminance.
    </p>

    <p>
        The init-sim-occupancy.rq SPARQL update initialises occupancy.
    </p>

    <p>
      The <a href="https://github.com/bold-benchmark/bold-server/blob/master/query/update-sim-reactions.rq">update-sim-reactions.rq</a> SPARQL update carries out updates of illuminance and occupancy during each iteration.
    </p>
    
    <h3>Task-dependent Updates</h3>

    <p>
      The init-ts1.rq SPARQL update initialises a task.
    </p>

    <p>
      During each iteration, the simulation server carries out task-dependent updates (e.g. tc4.rq).
    </p>

    <h2>Tasks and Faults</h2>

    <p>
      The goal of the agents operating over the BOLD building is to minimise faults as quickly as possible.
    </p>
    <p>
      Depending on the tasks (selected during the command-line call), 
    </p>
    <p>
      To remove a fault, the agent has to set (write) a property according to the task.
    </p>

    <h2>Checking Agent Performance</h2>

    <p>
      The queries ts1.rq (or ts2.rq or tc1.rq ...) check faults depending on the task, i.e., select the properties that do not have the correct value.
    </p>

    <script>
      const btn = document.getElementById('start-button');
      const txt = document.getElementById('start-payload');

      btn.onclick = () => {
        fetch('sim', {
          method: 'PUT',
          headers: {
            'Content-Type': 'text/turtle'
          },
          body: txt.value
        });
      };
    </script>
  </body>
</html>
